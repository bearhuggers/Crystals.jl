<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Usage · Crystals.jl</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-89508993-1', 'auto');
ga('send', 'pageview');
</script><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Crystals.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="basic.html">Basic Usage</a><ul class="internal"><li><a class="toctext" href="#Simple-Construction-1">Simple Construction</a></li><li><a class="toctext" href="#Accessing-the-cell-and-atomic-sites-1">Accessing the cell and atomic sites</a></li><li><a class="toctext" href="#Appending-and-removing-atoms-1">Appending and removing atoms</a></li><li><a class="toctext" href="#Iterating-through-a-structure-1">Iterating through a structure</a></li></ul></li><li><a class="toctext" href="cartesian.html">Cartesian and Fractional Coordinates</a></li><li><a class="toctext" href="methods.html">API Catalogue</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="basic.html">Basic Usage</a></li></ul><a class="edit-page" href="https://github.com/mdavezac/Crystals.jl/blob/master/docs/src/basic.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Basic Usage</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Simple-Construction-1" href="#Simple-Construction-1">Simple Construction</a></h2><p>A <code>Crystal</code> declares an atomic crystalline structure, e.g. an infinite periodic arrangement of atoms. The constructor takes at the very least an <code>n</code> by <code>n</code> array defining the periodicity of the crystal, i.e. the crystal cell. The cell must have physical units attached to it.</p><pre><code class="language-julia">using Crystals
crystal = Crystal(eye(3)u&quot;nm&quot;)

# output
cell(nm):
  1.0 0.0 0.0
  0.0 1.0 0.0
  0.0 0.0 1.0</code></pre><p>However, it can also accept atomic positions and any other array of atomic properties:</p><pre><code class="language-julia">crystal = Crystal(eye(2)u&quot;km&quot;,
                  position=transpose([1 1; 2 3; 4 5])u&quot;m&quot;,
                  species=[&quot;Al&quot;, &quot;O&quot;, &quot;O&quot;],
                  label=[:+, :-, :-])

# output
cell(m):
  1000.0 0.0
  0.0 1000.0

│ Atom │ Cartesian  │ species │ label │
├──────┼────────────┼─────────┼───────┤
│ 1    │ (1.0, 1.0) │ Al      │ +     │
│ 2    │ (2.0, 3.0) │ O       │ -     │
│ 3    │ (4.0, 5.0) │ O       │ -     │</code></pre><p>Note that the positions form an <code>n</code> by <code>N</code> array where <code>N</code> is the number of atoms. This is the logical mathematical format if when performing matrix operations on the positions. However, from an input point of view, it is easier to think one atom at at time, rather than one coordinate (and all atoms) at a time. Hence the transpose.</p><div><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The following are reserved column names that have special meaning. They can be used in most, but not all circumstances. For instance, <code>:x</code>, <code>:y</code>, and <code>:x</code> cannot be used in the constructor.</p><ul><li><p>:position</p></li><li><p>:fractional</p></li><li><p>:cartesian</p></li><li><p>:x</p></li><li><p>:y</p></li><li><p>:z</p></li></ul></div></div></div><h2><a class="nav-anchor" id="Accessing-the-cell-and-atomic-sites-1" href="#Accessing-the-cell-and-atomic-sites-1">Accessing the cell and atomic sites</a></h2><p>Access to the crystal cell happens via <code>.</code> call, <code>crystal.cell</code>. Atomic properties on the other hand are accessed and modified through the square bracket operator. There are several ways of doing this, more or less reflecting what can be done with a <a href="https://www.github.com/JuliaStats/DataFrames.jl">DataFrame</a>:</p><pre><code class="language-julia">println(crystal[:label])
println(crystal[[1, 3], [:species, :label]])

crystal[1, :position] = [0, 4]u&quot;m&quot;

# output
Symbol[:+, :-, :-]
2×2 DataFrames.DataFrame
│ Row │ species │ label │
├─────┼─────────┼───────┤
│ 1   │ Al      │ +     │
│ 2   │ O       │ -     │
2-element Array{Unitful.Quantity{Int64,Unitful.Dimensions{(Unitful.Dimension{:Length}(1//1),)},Unitful.FreeUnits{(Unitful.Unit{:Meter,Unitful.Dimensions{(Unitful.Dimension{:Length}(1//1),)}}(0, 1//1),),Unitful.Dimensions{(Unitful.Dimension{:Length}(1//1),)}}},1}:
 0 m
 4 m</code></pre><p>However, the main access pattern is atom/row-based. Using an integer or a sequence of integers will create a new <code>Crystal</code> structure with only the selected atoms.</p><pre><code class="language-julia">crystal[1]

# output
cell(m):
  1000.0 0.0
  0.0 1000.0

│ Atom │ Cartesian  │ species │ label │
├──────┼────────────┼─────────┼───────┤
│ 1    │ (1.0, 1.0) │ Al      │ +     │</code></pre><p>Note that the return is still a crystalline structure. In a way, we are selecting an atom <em>and</em> it&#39;s periodic image, rather than single atom.</p><h2><a class="nav-anchor" id="Appending-and-removing-atoms-1" href="#Appending-and-removing-atoms-1">Appending and removing atoms</a></h2><p>To add atoms to a <code>Crystal</code> instance, it is recommended to use the <code>push!</code>, <code>append!</code>, and <code>vcat</code> functions. Removing atoms and atomic properties from a structure can be done quite easily with <code>delete!</code>. Or alternatively, one can select a few atoms and properties using the bracket notation, e.g. <code>crystal[[1, 2], [:species, :label]]</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.push!" href="#Base.push!"><code>Base.push!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">push!(crystal, associative)
</code></pre><p>Appends an atom to a crystal structure. The position of the atom is a necessary argument, whether in Cartesian or in fractional coordinates. If keyword arguments are present, then they represent atomic properties for the atom being added. Properties that are not explicitly given are set to <code>missing</code>. Similarly, new properties that were not present in the crystal structure previously are <code>missing</code> except for the newly added atom.</p><p><strong>Examples</strong></p><pre><code class="language-julia">using Crystals
crystal = Crystal(eye(2)u&quot;km&quot;,
                  tpositions=[1 1; 2 3; 4 5]u&quot;m&quot;,
                  species=[&quot;Al&quot;, &quot;O&quot;, &quot;O&quot;],
                  label=[:+, :-, :-])
push!(crystal, [[10, 20]u&quot;nm&quot;, &quot;B&quot;, :a])
crystal

# output

cell(m):
  1000.0 0.0
  0.0 1000.0

│ Atom │ Cartesian        │ species │ label │
├──────┼──────────────────┼─────────┼───────┤
│ 1    │ (1.0, 1.0)       │ Al      │ +     │
│ 2    │ (2.0, 3.0)       │ O       │ -     │
│ 3    │ (4.0, 5.0)       │ O       │ -     │
│ 4    │ (1.0e-8, 2.0e-8) │ B       │ a     │</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L226-L259">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.append!" href="#Base.append!"><code>Base.append!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">append!(crystal, other; check_periodicity)
</code></pre><p>Appends one or more crystal structure to the first structure. Unless <code>check_periodicity</code> is <code>false</code>, the structures must have the exact same periodicity. An error will result otherwise.</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L617-L623">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.vcat" href="#Base.vcat"><code>Base.vcat</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">vcat(crystal, other; check_periodicity)
</code></pre><p>Concatenates crystals together. The lattices must be compatible.</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L601-L605">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.delete!" href="#Base.delete!"><code>Base.delete!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">Base.delete!(crystal::Crystal, col::Symbol)
Base.delete!(crystal::Crystal, col::AbstractVector{Symbol})</code></pre><p>Deletes one or more atomic property. Positions cannot be deleted.</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L533-L538">source</a><div><pre><code class="language-none">Base.delete!(crystal::Crystal, ::Colon)</code></pre><p>Deletes all atomic properties except for positions.</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L547-L551">source</a><div><pre><code class="language-none">delete!(crystal::Crystal, rows::Integer)
delete!(crystal::Crystal, rows::AbstractVector{Integer})
delete!{T &lt;: Integer}(crystal::Crystal, rows::Range{T})
delete!(crystal::Crystal, rows::Colon)</code></pre><p>Alias for <code>deleterows</code>[@ref].</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L591-L598">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="DataFrames.deleterows!" href="#DataFrames.deleterows!"><code>DataFrames.deleterows!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">deleterows!(crystal::Crystal, rows::Integer)
deleterows!(crystal::Crystal, rows::AbstractVector{Integer})
deleterows!{T &lt;: Integer}(crystal::Crystal, rows::Range{T})
deleterows!(crystal::Crystal, rows::Colon)</code></pre><p>Deletes one (single integer), a few (sequence or range), or all (colon) atoms in the structure.</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L566-L574">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.empty!" href="#Base.empty!"><code>Base.empty!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">empty!(crystal)
</code></pre><p>Deletes all atomic sites, both properties and positions.</p></div><a class="source-link" target="_blank" href="https://github.com/mdavezac/Crystals.jl/blob/34a58f4c51cc1d1f6dc9d762edf777e7791fae10/src/Structures.jl#L556-L560">source</a></section><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>Manipulating directly the fields <code>positions</code> and <code>properties</code> of a <code>Crystal</code> instance is discouraged. In practice, the only requirement is that the two represent the same number of atoms (with the exception of crystals with no atomic properties outside of the positions, for which the <code>properties</code> field is empty). However, no provision is made anywhere in the code for abnormal <code>Crystal</code> structure. This means the code may crash in creative ways.</p></div></div><h2><a class="nav-anchor" id="Iterating-through-a-structure-1" href="#Iterating-through-a-structure-1">Iterating through a structure</a></h2><p>It is a possible to iterate through all the atoms of a structure. The object yielded references directly the parent structure. Atomic properties and positions can be accessed and modified one site at a time.</p><pre><code class="language-julia">for atom in eachatom(crystal)
    println(&quot;Atom: &quot;, atom[:species], &quot; and &quot;, atom[:label])
    atom[:species] *= string(atom[:label])
end
crystal

# output
Atom: Al and +
Atom: O and -
Atom: O and -
cell(m):
  1000.0 0.0
  0.0 1000.0

│ Atom │ Cartesian  │ species │ label │
├──────┼────────────┼─────────┼───────┤
│ 1    │ (1.0, 1.0) │ Al+     │ +     │
│ 2    │ (2.0, 3.0) │ O-      │ -     │
│ 3    │ (4.0, 5.0) │ O-      │ -     │</code></pre><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>Modifying the number of sites in the crystal structure during iteration will result in undefined behaviour.</p></div></div><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="cartesian.html"><span class="direction">Next</span><span class="title">Cartesian and Fractional Coordinates</span></a></footer></article></body></html>
